<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Agenda de Contactos</title>
</head>
<body>
    <h1>Agregar Contacto</h1>
    <form id="contactoForm">
        <label>Nombre: <input type="text" id="nombre" required></label><br>
        <label>Correo: <input type="email" id="correo" required></label><br>
        <label>Teléfono: <input type="text" id="telefono" required></label><br>
        <label>Dirección: <input type="text" id="direccion" required></label><br>
        <button type="submit">Guardar</button>
    </form>
    <div id="resultado"></div>

    <script>
        document.getElementById('contactoForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const datos = {
                nombre: document.getElementById('nombre').value,
                correo: document.getElementById('correo').value,
                telefono: document.getElementById('telefono').value,
                direccion: document.getElementById('direccion').value
            };

            // Cambie la URL por la de su backend real (debe estar accesible públicamente para funcionar en GitHub Pages)
            const url = "http://localhost:3000/contactos";

            try {
                const resp = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(datos)
                });

                if (resp.ok) {
                    document.getElementById('resultado').innerText = "Contacto guardado correctamente.";
                    document.getElementById('contactoForm').reset();
                } else {
                    document.getElementById('resultado').innerText = "Error al guardar.";
                }
            } catch (err) {
                document.getElementById('resultado').innerText = "Error de conexión.";
            }
        });
    </script>
</body>
</html>
